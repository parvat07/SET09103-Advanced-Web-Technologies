{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="welcome-message">
    <h1 class="text-center">Welcome, {{ current_user.email }}!</h1>
    <h2 class="text-center">To Do List</h2>
    <p class="text-justify">
        "Organizing your tasks effectively can make all the difference in productivity. By maintaining a well-structured to-do list, 
        you ensure that every important task is accounted for and nothing is overlooked. Whether it's personal errands, work-related 
        projects, or daily routines, a good to-do list allows you to prioritize and break down larger tasks into manageable steps. 
        Stay on top of your responsibilities, keep track of deadlines, and enjoy the satisfaction of accomplishing everything you set 
        out to do. Start adding your tasks today and make the most of your time!"
    </p>
</div>

<div class="task-actions text-center">
    <a href="{{ url_for('create_task') }}" class="btn btn-primary">Create New Task</a>
</div>

<div class="task-list">
    <!-- High Priority Tasks -->
    <h3 class="priority-title">High Priority Tasks</h3>
    <ul>
        {% for task in high_priority_tasks %}
        <li class="task-item">
            <p>
                <strong>{{ task.title }}</strong> - 
                {% if task.description %}
                    {% if task.description|length > 10 %}
                        {{ task.description[:10] }}... 
                        <a href="{{ url_for('task_detail', task_id=task.id) }}">See more</a>
                    {% else %}
                        {{ task.description }}
                    {% endif %}
                {% else %}
                    No description available
                {% endif %}
                - Due: {{ task.due_date }}
            </p>
            <div class="task-buttons">
                <a href="{{ url_for('edit_task', task_id=task.id) }}" class="btn btn-secondary">Edit</a>
                <form action="{{ url_for('delete_task', task_id=task.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger" 
                        onclick="return confirm('Are you sure you want to delete this task?')">Delete</button>
                </form>
            </div>
        </li>
        {% endfor %}
    </ul>

    <!-- Medium Priority Tasks -->
    <h3 class="priority-title">Medium Priority Tasks</h3>
    <ul>
        {% for task in medium_priority_tasks %}
        <li class="task-item">
            <p>
                <strong>{{ task.title }}</strong> - 
                {% if task.description %}
                    {% if task.description|length > 10 %}
                        {{ task.description[:10] }}... 
                        <a href="{{ url_for('task_detail', task_id=task.id) }}">See more</a>
                    {% else %}
                        {{ task.description }}
                    {% endif %}
                {% else %}
                    No description available
                {% endif %}
                - Due: {{ task.due_date }}
            </p>
            <div class="task-buttons">
                <a href="{{ url_for('edit_task', task_id=task.id) }}" class="btn btn-secondary">Edit</a>
                <form action="{{ url_for('delete_task', task_id=task.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger" 
                        onclick="return confirm('Are you sure you want to delete this task?')">Delete</button>
                </form>
            </div>
        </li>
        {% endfor %}
    </ul>

    <!-- Low Priority Tasks -->
    <h3 class="priority-title">Low Priority Tasks</h3>
    <ul>
        {% for task in low_priority_tasks %}
        <li class="task-item">
            <p>
                <strong>{{ task.title }}</strong> - 
                {% if task.description %}
                    {% if task.description|length > 10 %}
                        {{ task.description[:10] }}... 
                        <a href="{{ url_for('task_detail', task_id=task.id) }}">See more</a>
                    {% else %}
                        {{ task.description }}
                    {% endif %}
                {% else %}
                    No description available
                {% endif %}
                - Due: {{ task.due_date }}
            </p>
            <div class="task-buttons">
                <a href="{{ url_for('edit_task', task_id=task.id) }}" class="btn btn-secondary">Edit</a>
                <form action="{{ url_for('delete_task', task_id=task.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger" 
                        onclick="return confirm('Are you sure you want to delete this task?')">Delete</button>
                </form>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
